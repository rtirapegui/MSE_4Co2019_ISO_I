/*
===============================================================================
 Name        : os_semphr.h
 Author      : $(Rodrigo Tirapegui)
 Version     :
 Copyright   : $(copyright)
 Description :
===============================================================================
*/

#ifndef _OS_SEMPHR_H_
#define _OS_SEMPHR_H_

/*==================[inclusions]=============================================*/
#include <stdint.h>

/*==================[typedef]================================================*/
/* Semaphore type */
typedef struct
{
	uint32_t value;
	void *	 tasksArr[];
} semphr_t;

/*==================[macros]=================================================*/
#define OS_SEMPHR_CREATE(name, length)								\
		uint8_t name##_waitingTasksArr[length] = { 0 };				\
		semphrDefinition_t name = {									\
								   .value = 0,						\
								   .waitingTasks = waitingTasksArr	\
								  };

/*==================[external data declaration]==============================*/

/*==================[functions declaration]==================================*/

/*==================[end of file]============================================*/

#endif	/*	#ifndef _OS_SEMPHR_H_ */
