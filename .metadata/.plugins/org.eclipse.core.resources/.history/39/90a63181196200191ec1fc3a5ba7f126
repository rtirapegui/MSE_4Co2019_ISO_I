/*
===============================================================================
 Name        : os_semphr.h
 Author      : $(Rodrigo Tirapegui)
 Version     :
 Copyright   : $(copyright)
 Description :
===============================================================================
*/

#ifndef _OS_SEMPHR_H_
#define _OS_SEMPHR_H_

/*==================[inclusions]=============================================*/
#include <stdint.h>

/*==================[typedef]================================================*/
/* Semaphore type */
typedef struct
{
	uint32_t value;
	void *	 tasksArr[];
} semphr_t;

/*==================[macros]=================================================*/
#define OS_SEMPHR_CREATE(name, length)									\
		const uint32_t name##_SEMPHR_MAX = length;						\
		void * name##_semphrTasksArr[name##_SEMPHR_MAX];				\
		semphr_t name##_semphr = {										\
									.value = 0,							\
									.tasksArr = name##_semphrTasksArr	\
								 };

/*==================[external data declaration]==============================*/

/*==================[functions declaration]==================================*/

/*==================[end of file]============================================*/

#endif	/*	#ifndef _OS_SEMPHR_H_ */
